<%- include('partials/header', { title: 'Local Community Portal', active: 'home' }) %>

<!-- INTRO: welcome copy only (single column) -->
<section class="intro-panel">
  <div class="container intro-inner one-col">
    <div class="intro-copy">
      <h1>Welcome to your Local Community</h1>
      <p class="lead">
        Find local events, clubs, and services across Sports, Health, Education, and Arts.
        Explore what’s on this week and get involved.
      </p>
      <a href="/events" class="btn btn-primary">See all events</a>
    </div>
  </div>
</section>

<!-- EVENTS: featured card + small upcoming cards underneath the intro -->
<section class="container intro-events-block">
  <% if (featured) { %>
    <article class="card highlight" style="margin-bottom:12px;">
      <h3 class="eyebrow">Live / Next up</h3>
      <h2 class="card-title">
        <a href="/events/<%= featured.id %>"><%= featured.title %></a>
      </h2>
      <p class="meta">
        <strong>When:</strong>
        <time datetime="<%= featured.date %>">
          <%= new Date(featured.date).toLocaleDateString('en-GB', { weekday:'long', day:'numeric', month:'long', year:'numeric' }) %>
        </time>
        <% if (featured.area) { %> • <strong>Area:</strong> <%= featured.area %><% } %>
      </p>
      <% if (featured.summary) { %><p><%= featured.summary %></p><% } %>
    </article>
  <% } %>

  <div class="upcoming-mini">
    <% (upcoming || []).forEach(ev => { %>
      <article class="card mini">
        <h4><a href="/events/<%= ev.id %>"><%= ev.title %></a></h4>
        <p class="meta">
          <strong>Date:</strong>
          <time datetime="<%= ev.date %>">
            <%= new Date(ev.date).toLocaleDateString('en-GB', { day:'numeric', month:'long', year:'numeric' }) %>
          </time>
          <% if (ev.area) { %> • <%= ev.area %><% } %>
        </p>
        <% if (ev.summary) { %><p><%= ev.summary %></p><% } %>
      </article>
    <% }) %>
  </div>
</section>

<!-- AREAS: simple grid of area cards -->
<section class="container page-content" style="background: transparent; box-shadow: none;">
  <h2 style="text-align:center; margin-bottom:.25rem;">Explore Community Areas</h2>
  <p class="muted" style="text-align:center; margin-bottom:1rem;">Browse activities and services by category.</p>

  <div class="grid">
    <% (areas || []).forEach(a => { 
         const name = a.name;
         // Create friendly slug for Arts & Culture and otherwise use lowercase name
         const slug = /arts/i.test(name) && /culture|&/i.test(name)
           ? 'arts-and-culture'
           : name.toLowerCase();
    %>
      <a href="/areas/<%= slug %>" class="card">
        <h3><%= name %></h3>
        <p>See listings and events in <%= name %>.</p>
      </a>
    <% }) %>
  </div>
</section>

<%- include('partials/footer') %>
