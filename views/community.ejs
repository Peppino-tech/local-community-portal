<%- include('partials/header', { title: (area && area.name ? area.name + ' • ' : '') + 'Local Community Portal', active: active }) %>

<section class="container page-content">
  <h1><%= area && area.name ? area.name : 'Area' %> — Activities & Events</h1>

  <div class="card-grid">
    <% if ((listings || []).length) { %>
      <% listings.forEach(function(ev){ 
           // fallback image per area, like on Events page
           var nm   = (area && area.name) ? area.name : 'Sports';
           var slug = /arts/i.test(nm) ? 'arts-and-culture' : nm.toLowerCase();
           var img  = ev.image_url || ('/images/areas/' + slug + '.jpg');
      %>
        <a class="card tile" href="/events/<%= ev.id %>">
          <div class="tile-media" style="--bg:url('<%= img %>')"></div>
          <div class="tile-body">
            <h3><%= ev.title %></h3>
            <p class="meta">
              <time datetime="<%= ev.date %>">
                <%= new Date(ev.date).toLocaleDateString('en-GB', { day:'2-digit', month:'short', year:'numeric' }) %>
              </time>
              <span class="badge <%= ev.isPast ? 'badge-past' : 'badge-upcoming' %>">
                <%= ev.isPast ? 'Past' : 'Upcoming' %>
              </span>
            </p>
            <% if (ev.summary) { %><p><%= ev.summary %></p><% } %>
          </div>
        </a>
      <% }); %>
    <% } else { %>
      <p class="muted">No activities or events are currently listed for this area.</p>
    <% } %>
  </div>
</section>

<%- include('partials/footer') %>
