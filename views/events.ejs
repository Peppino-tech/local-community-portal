<%- include('partials/header', { title: 'Events • Local Community Portal', active: 'events' }) %>

<section class="container">
  <h1>Events</h1>

  <!-- Filters -->
  <div class="card" style="margin:18px 0;">
    <form id="eventsFilters" class="filters" onsubmit="return false" aria-describedby="ev-summary">
      <div class="filters-row">
        <label>Year
          <select id="ev-year" name="year">
            <option value="">All</option>
            <% (years || []).forEach(y => { %>
              <option value="<%= y %>" <%= (currentYear && y === currentYear) ? 'selected' : '' %>><%= y %></option>
            <% }) %>
          </select>
        </label>

        <label>Area
          <select id="ev-area" name="area_id">
            <option value="">All</option>
            <% (areas || []).forEach(a => { %>
              <option value="<%= a.id %>"><%= a.name %></option>
            <% }) %>
          </select>
        </label>

        <label>Type
          <select id="ev-type" name="type_id">
            <option value="">All</option>
            <% (types || []).forEach(t => { %>
              <option value="<%= t.id %>"><%= t.name %></option>
            <% }) %>
          </select>
        </label>

        <label class="checkbox">
          <input id="ev-past" type="checkbox" name="past" value="1">
          Show past events
        </label>
      </div>

      <div class="filters-row">
        <label class="grow">
          <span class="sr-only">Search events</span>
          <input id="ev-q" type="search" name="q" placeholder="Search events…" autocomplete="off" />
        </label>

        <div class="pager">
          <button id="ev-prev" class="btn btn-outline" type="button" aria-label="Previous page">Previous</button>
          <button id="ev-next" class="btn" type="button" aria-label="Next page">Next</button>
        </div>
      </div>
    </form>
  </div>

  <!-- Live summary for screen readers -->
  <div id="ev-summary" role="status" aria-live="polite" style="margin:8px 0 12px; color:var(--muted)"></div>

  <!-- Results -->
  <div id="eventsList" class="card-grid" aria-live="polite" aria-busy="false"></div>
</section>

<script src="/js/events.js"></script>
<%- include('partials/footer') %>
