<%- include('partials/header', { title: 'Events • Local Community Portal', active: active }) %>

<div class="page-content container">
  <h1>Events</h1>

  <form id="filters" class="card" onsubmit="return false;">
    <div class="grid">
      <label>Year
        <select name="year">
          <% years.forEach(y => { %>
            <option value="<%= y %>" <%= y === currentYear ? 'selected' : '' %>><%= y %></option>
          <% }) %>
        </select>
      </label>

      <label>Area
        <select name="area_id">
          <option value="">All</option>
          <% areas.forEach(a => { %>
            <option value="<%= a.id %>"><%= a.name %></option>
          <% }) %>
        </select>
      </label>

      <label>Type
        <select name="type_id">
          <option value="">All</option>
          <% types.forEach(t => { %>
            <option value="<%= t.id %>"><%= t.name %></option>
          <% }) %>
        </select>
      </label>

      <label>Search
        <input type="search" name="q" placeholder="Search events…">
      </label>

      <label>Show
        <select name="past">
          <option value="">All</option>
          <option value="false" selected>Upcoming</option>
          <option value="true">Past</option>
        </select>
      </label>
    </div>
  </form>

  <div id="results" class="grid" aria-live="polite"></div>
  <div class="pagination" style="display:flex; gap: .5rem; align-items:center; margin-top:1rem;">
    <button id="prev" disabled>Previous</button>
    <span id="pageInfo"></span>
    <button id="next" disabled>Next</button>
  </div>
</div>

<script src="/js/events.js" defer></script>
<%- include('partials/footer') %>